<!DOCTYPE html>
<html>
    <head>
        <title>Satisfaying.you</title>
        <link rel="stylesheet" href="../css/index.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <link href="https://fonts.googleapis.com/css2?family=Averia+Libre&display=swap" rel="stylesheet">
    </head>
    
    <body>
        
        <header>
            <div class="logo">
                <span class="material-symbols-outlined">sentiment_satisfied</span>
            </div>
            <span>Satisfaying.you</span>
        </header>

        <div class="container">
            <div id="login-title">
                <span>Fazer login</span>
            </div>
            <form id='form_login_account' action="home.html" autocomplete="on" method="post">
            <div class="inputs">
                <label for="txt_email">E-mail</label>
                <input type="email" name="txt_email" id="txt_email" placeholder="Digite seu e-mail">
            </div>
            <div class="inputs">
                <label for="txt_senha">Senha</label>
                <input type="password" name="txt_senha" id="txt_senha" placeholder="Digite sua senha">
            </div>
            <div class="error">
                <span id="retorno_validar"></span>
                <a href="recuperarSenha.html">Esqueci minha senha</a>
            </div>
            <div class="entrar">
                <a href="NovaConta.html">Criar conta</a>
                <input type="submit" value="Entrar" onclick="return entrar()">
            </div>
            </form>
        </div>

        <script>   
            function entrar() {
                let ValidaUsuario = {
                    usuario: '',
                    senha: ''
                }

                let usuarios = JSON.parse(localStorage.getItem('usuarios'))

                usuarios.forEach((item) => {
                    if(txt_email.value == item.usuario && txt_senha.value == item.senha){
                        ValidaUsuario = {
                            usuario: item.usuario,
                            senha: item.senha
                        }
                    }
                })
                
                if (txt_email.value == ValidaUsuario.usuario && txt_senha.value == ValidaUsuario.senha) {
                    document.getElementById('retorno_validar').innerHTML = ''
                    return true;
                } else {
                    document.getElementById('retorno_validar').innerHTML = 'Usuário ou senha inválidos.'
                    return false;
                }
            }
        </script>
    </body>
</html>